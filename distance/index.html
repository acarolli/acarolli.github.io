<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR.js com Distância e Interação</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.0.8/aframe/build/aframe-ar.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <!-- Câmera para visualização -->
        <a-entity camera></a-entity>

        <!-- Adicionar os 25 marcadores de Realidade Aumentada -->
        <a-marker preset="hiro" type="pattern" url="padrao1.patt">
            <!-- Adicionar o objeto 3D com as coordenadas geográficas -->
            <a-entity gltf-model="url(caminho/para/seu/modelo1.gltf)" position="0 0 0" gps-entity-place="latitude: -19.973222; longitude: -43.969979"></a-entity>

            <!-- Texto para mostrar quando próximo ao objeto -->
            <a-text id="textoProximo1" position="0 1.5 -1.5" visible="false" value="Você está próximo de uma pista" align="center" width="4"></a-text>

            <!-- Botão para abrir o site quando próximo ao objeto -->
            <a-entity id="botaoSite1" position="0 0 -1.5" visible="false" geometry="primitive: box; width: 1; height: 0.5; depth: 0.1" material="color: blue" text="value: Abrir site; align: center"></a-entity>
        </a-marker>

        <!-- Repetir o mesmo padrão para os outros marcadores -->
        <!-- Adicionar marcadores de Realidade Aumentada adicionais aqui -->

        <!-- Componente para atualizar a distância e a interação -->
        <a-entity atualizacao-distancia></a-entity>
    </a-scene>

    <script>
        AFRAME.registerComponent('atualizacao-distancia', {
            tick: function () {
                const markers = document.querySelectorAll('a-marker');
                const camera = this.el.sceneEl.camera.el.object3D.getWorldPosition();

                markers.forEach((marker, index) => {
                    const objetoAR = marker.object3D.getWorldPosition();
                    const distancia = camera.distanceTo(objetoAR);

                    const textoProximo = document.getElementById("textoProximo" + (index + 1));
                    const botaoSite = document.getElementById("botaoSite" + (index + 1));

                    if (distancia <= 200) {
                        textoProximo.setAttribute("visible", true);

                        if (distancia <= 10) {
                            botaoSite.setAttribute("visible", true);
                        } else {
                            botaoSite.setAttribute("visible", false);
                        }
                    } else {
                        textoProximo.setAttribute("visible", false);
                        botaoSite.setAttribute("visible", false);
                    }
                });
            }
        });

        // Abrir o site ao clicar no objeto
        function abrirSite(numero) {
            window.open("https://seusite" + numero + ".com", "_blank");
        }
    </script>
</body>
</html>
