latitude: -19.973222; longitude: -43.969979"></a-entity><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR.js com Distância e Interação</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.0.8/aframe/build/aframe-ar.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <!-- Câmera para visualização -->
        <a-entity camera></a-entity>

        <!-- Adicione seus marcadores de Realidade Aumentada -->
        <!-- Substitua as coordenadas lat/long/alt para cada objeto -->
        <!-- Lembre-se de ajustar as coordenadas de acordo com a sua localização -->
        <a-entity gltf-model="./assets/treasure/scene.gltf" gps-entity-place="latitude: -19.973222; longitude: -43.969979" atualizacao-frame></a-entity>
        <a-entity gltf-model="./assets/treasure/scene.gltf" gps-entity-place="latitude: -19.974222; longitude: -43.968979" atualizacao-frame></a-entity>
        <!-- Adicione mais objetos conforme necessário -->

        <!-- Elementos de interação -->
        <a-entity id="textoProximo" position="0 1.5 -1.5" visible="false" text="value: Você está próximo de uma pista; align: center; width: 4"></a-entity>
        <a-entity id="botaoSite" position="0 0 -1.5" visible="false" geometry="primitive: box; width: 1; height: 0.5; depth: 0.1" material="color: blue" text="value: Abrir site; align: center"></a-entity>
    </a-scene>

    <script>
        // Atualização do frame
        AFRAME.registerComponent('atualizacao-frame', {
            tick: function () {
                // Obter a posição da câmera (celular)
                const camera = this.el.sceneEl.camera.el.object3D.getWorldPosition();

                // Obter a posição do objeto AR
                const objetoAR = this.el.object3D.getWorldPosition();

                // Calcular a distância entre a câmera e o objeto AR
                const distancia = camera.distanceTo(objetoAR);

                // Atualizar visibilidade do texto e botão baseado na distância
                const textoProximo = document.getElementById("textoProximo");
                const botaoSite = document.getElementById("botaoSite");

                if (distancia <= 200) {
                    textoProximo.setAttribute("visible", true);

                    if (distancia <= 10) {
                        botaoSite.setAttribute("visible", true);
                    } else {
                        botaoSite.setAttribute("visible", false);
                    }
                } else {
                    textoProximo.setAttribute("visible", false);
                    botaoSite.setAttribute("visible", false);
                }
            }
        });

        // Abrir o site ao clicar no objeto
        document.getElementById("botaoSite").addEventListener("click", function() {
            window.open("https://seusite.com", "_blank");
        });
    </script>
</body>
</html>
