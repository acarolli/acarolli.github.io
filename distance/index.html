<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Caça Ao Tesouro - BH</title>
    <script src='https://aframe.io/releases/0.9.2/aframe.min.js'></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script>
        THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
    </script>
    <!--<script src="./script.js"></script>-->
    <!--<link rel="stylesheet" type="text/css" href="./style.css"/>-->
</head>
<body style="margin: 0; overflow: hidden;">
	    <div class="centered instructions"></div>
    <a-scene  vr-mode-ui='enabled: false' embedded arjs='sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false;'>
        <!-- Câmera para visualização -->
        <a-entity camera gps-camera></a-entity>

        <!-- Adicione seus marcadores de Realidade Aumentada -->
        <!-- Substitua as coordenadas lat/long/alt para cada objeto -->
        <!-- Lembre-se de ajustar as coordenadas de acordo com a sua localização -->
        <a-entity gltf-model="./assets/treasure/scene.gltf" gps-entity-place="latitude: -19.973222; longitude: -43.969979" atualizacao-frame></a-entity>
        <a-entity gltf-model="./assets/treasure/scene.gltf" gps-entity-place="latitude: -19.974222; longitude: -43.968979" atualizacao-frame></a-entity>
        <!-- Adicione mais objetos conforme necessário -->

        <!-- Elementos de interação -->
        <a-entity id="textoProximo" position="0 1.5 -1.5" visible="false" text="value: Você está próximo de uma pista; align: center; width: 4"></a-entity>
        <a-entity id="botaoSite" position="0 0 -1.5" visible="false" geometry="primitive: box; width: 1; height: 0.5; depth: 0.1" material="color: blue" text="value: Abrir site; align: center"></a-entity>
    </a-scene>

    <script>
        // Atualização do frame
        AFRAME.registerComponent('atualizacao-frame', {
            tick: function () {
                // Obter a posição da câmera (celular)
                const camera = this.el.sceneEl.camera.el.object3D.getWorldPosition();

                // Obter a posição do objeto AR
                const objetoAR = this.el.object3D.getWorldPosition();

                // Calcular a distância entre a câmera e o objeto AR
                const distancia = camera.distanceTo(objetoAR);

                // Atualizar visibilidade do texto e botão baseado na distância
                const textoProximo = document.getElementById("textoProximo");
                const botaoSite = document.getElementById("botaoSite");

                if (distancia <= 200) {
                    textoProximo.setAttribute("visible", true);

                    if (distancia <= 10) {
                        botaoSite.setAttribute("visible", true);
                    } else {
                        botaoSite.setAttribute("visible", false);
                    }
                } else {
                    textoProximo.setAttribute("visible", false);
                    botaoSite.setAttribute("visible", false);
                }
            }
        });

        // Abrir o site ao clicar no objeto
        document.getElementById("botaoSite").addEventListener("click", function() {
            window.open("https://seusite.com", "_blank");
        });
    </script>
</body>
</html>
